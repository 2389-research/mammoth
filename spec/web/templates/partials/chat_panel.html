{{/* ABOUTME: Chat panel for the right rail of the spec compositor. */}}
{{/* ABOUTME: Message list with avatars, question cards, and textarea input. SSE provided by parent. */}}

<div class="chat-panel">
    <div class="chat-panel-header">
        <span class="chat-panel-title">Chat</span>
    </div>
    {{ template "chat_transcript" . }}

    <div class="chat-input-area">
        <form hx-post="/web/specs/{{ .SpecID }}/chat"
              hx-target="#{{ .ContainerID }}"
              hx-swap="outerHTML"
              hx-on::after-request="this.reset()">
            <div class="chat-input-row">
                <textarea name="message" placeholder="Ask the agents anything..." rows="1" required></textarea>
                <button type="submit" class="btn btn-send" title="Send">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="19" x2="12" y2="5"/><polyline points="5 12 12 5 19 12"/></svg>
                </button>
            </div>
        </form>
    </div>
</div>
