{{/* ABOUTME: Document/prose view of a spec with structured sections and card listings. */}}
{{/* ABOUTME: Auto-generated from spec data; sections use pre-rendered HTML content. */}}
<div class="document">
    <div class="document-notice">
        <span class="notice-icon">&#9432;</span>
        Auto-generated from spec data. Edit cards on the Board to update this document.
        <button class="btn btn-sm btn-regen"
                hx-get="/web/specs/{{ .SpecID }}/document"
                hx-target="#canvas" hx-swap="innerHTML"
                title="Refresh document from current spec data">
            Regenerate
        </button>
        <button class="btn btn-sm btn-export"
                hx-post="/web/specs/{{ .SpecID }}/regenerate"
                hx-target=".regen-status" hx-swap="innerHTML"
                title="Save exports to disk">
            Export to Disk
        </button>
        <span class="regen-status"></span>
    </div>
    <h1>{{ .Title }}</h1>
    <blockquote>{{ .OneLiner }}</blockquote>

    <h2>Goal</h2>
    <div class="doc-content">{{ .GoalHTML }}</div>

    {{ if .DescriptionHTML }}
    <h2>Description</h2>
    <div class="doc-content">{{ .DescriptionHTML }}</div>
    {{ end }}

    {{ if .ConstraintsHTML }}
    <h2>Constraints</h2>
    <div class="doc-content">{{ .ConstraintsHTML }}</div>
    {{ end }}

    {{ if .SuccessCriteriaHTML }}
    <h2>Success Criteria</h2>
    <div class="doc-content">{{ .SuccessCriteriaHTML }}</div>
    {{ end }}

    {{ if .RisksHTML }}
    <h2>Risks</h2>
    <div class="doc-content">{{ .RisksHTML }}</div>
    {{ end }}

    {{ if .NotesHTML }}
    <h2>Notes</h2>
    <div class="doc-content">{{ .NotesHTML }}</div>
    {{ end }}

    {{ if .Lanes }}
    <hr>
    {{ range .Lanes }}
    <h2>{{ .Name }}</h2>
    {{ if not .Cards }}
    <p class="muted">No cards in this lane.</p>
    {{ else }}
    {{ range .Cards }}
    <h3>{{ .Title }} <span class="card-type badge-{{ .CardType }}">{{ .CardType }}</span></h3>
    {{ if .BodyHTML }}
    <div class="doc-content">{{ .BodyHTML }}</div>
    {{ end }}
    <p class="card-meta">by {{ .CreatedBy }}</p>
    {{ end }}
    {{ end }}
    {{ end }}
    {{ end }}
</div>
