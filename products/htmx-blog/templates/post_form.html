<!-- ABOUTME: Form template for creating and editing blog posts. -->
<!-- ABOUTME: Uses HTMX to submit via POST (create) or PUT (edit) without page reload. -->
{% extends "base.html" %}

{% block title %}{% if post %}Edit Post{% else %}New Post{% endif %} - Blog{% endblock %}

{% block content %}
<div class="post-form-container">
    <h1>{% if post %}Edit Post{% else %}New Post{% endif %}</h1>

    <form {% if post %}
            hx-put="/posts/{{ post.id }}"
          {% else %}
            hx-post="/posts"
          {% endif %}
          hx-target="#main-content">

        <div class="form-group">
            <label for="title">Title</label>
            <input type="text"
                   id="title"
                   name="title"
                   value="{{ post.title if post else '' }}"
                   placeholder="Your post title..."
                   required>
        </div>

        <div class="form-group">
            <label for="body">Body <span class="label-hint">(Markdown supported)</span></label>
            <textarea id="body"
                      name="body"
                      rows="16"
                      placeholder="Write your post in Markdown..."
                      required>{{ post.body if post else '' }}</textarea>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                {% if post %}Update Post{% else %}Publish Post{% endif %}
            </button>
            <a href="/"
               class="btn btn-link"
               hx-get="/"
               hx-target="#main-content"
               hx-push-url="true">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
