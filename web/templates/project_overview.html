{{define "content"}}
<style>
    .overview-shell {
        display: grid;
        gap: 14px;
    }
    .overview-hero {
        border-radius: var(--radius-2xl);
        border: 1px solid color-mix(in srgb, var(--border) 84%, #0ea5e9 16%);
        background:
            radial-gradient(circle at 88% 15%, color-mix(in srgb, #38bdf8 20%, transparent), transparent 38%),
            linear-gradient(150deg, color-mix(in srgb, var(--bg-card) 90%, #eff6ff 10%), var(--bg-card));
        box-shadow: 0 18px 48px color-mix(in srgb, #0f172a 9%, transparent);
        padding: 18px 20px;
    }
    .overview-hero h1 {
        margin: 0;
        font-family: var(--font-display);
    }
    .overview-hero p {
        margin: 7px 0 0 0;
        color: var(--text-secondary);
        font-size: 13px;
    }
    .overview-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
    }
    .overview-card {
        border-radius: var(--radius-2xl);
        border: 1px solid var(--border);
        background: var(--bg-card);
        box-shadow: 0 14px 36px color-mix(in srgb, #0f172a 7%, transparent);
        padding: 14px;
    }
    .overview-card h3 {
        margin: 0;
    }
    .overview-card p {
        margin: 7px 0 0 0;
        font-size: 13px;
        color: var(--text-secondary);
    }
    @media (max-width: 1024px) {
        .overview-grid {
            grid-template-columns: 1fr;
        }
    }
</style>

<section class="overview-shell">
    <section class="overview-hero">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
            <div class="web-stack" style="gap:4px;">
                <h1>{{.Project.Name}}</h1>
                <p>Created {{.Project.CreatedAt.Format "Jan 2, 2006 3:04 PM"}}</p>
            </div>
            <span class="web-phase-pill web-phase-{{.Project.Phase}}">{{.Project.Phase}}</span>
        </div>
    </section>

    <section class="overview-grid">
        <div class="overview-card">
            <h3>Spec</h3>
            <p>Shape intent, constraints, and decision points before generating pipeline DOT.</p>
            {{if .Project.SpecID}}
                <p class="web-note" style="margin-top: 8px; color: var(--success);">Spec initialized</p>
            {{end}}
            <div class="web-inline-actions">
                <a href="/projects/{{.Project.ID}}/spec" class="btn">
                    {{if eq (lower (print .Project.Phase)) "spec"}}Start Spec{{else}}View Spec{{end}}
                </a>
            </div>
            {{if .Project.SpecID}}
            <form method="POST" action="/projects/{{.Project.ID}}/spec/continue" style="margin-top: 8px;">
                <button type="submit" class="btn btn-primary">Generate DOT + Continue</button>
            </form>
            {{end}}
        </div>

        <div class="overview-card">
            <h3>Edit</h3>
            <p>Refine graph structure, inspect diagnostics, and tune execution prompts.</p>
            {{if .Project.DOT}}
                <p class="web-note" style="margin-top: 8px; color: var(--success);">DOT defined</p>
            {{end}}
            <div class="web-inline-actions">
                <a href="/projects/{{.Project.ID}}/editor" class="btn">
                    {{if eq (lower (print .Project.Phase)) "edit"}}Edit DOT{{else}}View DOT{{end}}
                </a>
            </div>
            {{if .Project.DOT}}
            <form method="POST" action="/projects/{{.Project.ID}}/build/start" style="margin-top: 8px;">
                <button type="submit" class="btn btn-primary">Continue to Build</button>
            </form>
            {{end}}
        </div>

        <div class="overview-card">
            <h3>Build</h3>
            <p>Execute with live telemetry, reconnect-safe event streams, and node-level progress.</p>
            {{if .Project.RunID}}
                <p class="web-note" style="margin-top: 8px; color: var(--success);">Run: {{.Project.RunID}}</p>
            {{end}}
            {{if eq (lower (print .Project.Phase)) "build"}}
                <div class="web-inline-actions">
                    <a href="/projects/{{.Project.ID}}/build" class="btn btn-primary">
                        {{if .Project.RunID}}Continue Building{{else}}View Build{{end}}
                    </a>
                </div>
            {{else if and (eq (lower (print .Project.Phase)) "done") .Project.RunID}}
                <div class="web-inline-actions">
                    <a href="/projects/{{.Project.ID}}/build" class="btn">View Last Build</a>
                </div>
            {{else if not .Project.DOT}}
                <div class="web-inline-actions">
                    <a href="/projects/{{.Project.ID}}/editor" class="btn">Define DOT First</a>
                </div>
            {{else}}
                <form method="POST" action="/projects/{{.Project.ID}}/build/start" style="margin-top: 10px;">
                    <button type="submit" class="btn">Start Build</button>
                </form>
            {{end}}
        </div>
    </section>

    {{if .Project.Diagnostics}}
    <div class="card" style="margin-top: 2px;">
        <h3>Diagnostics</h3>
        <ul style="margin-top: 8px; padding-left: 18px;">
            {{range .Project.Diagnostics}}
            <li class="web-note">{{.}}</li>
            {{end}}
        </ul>
    </div>
    {{end}}
</section>
{{end}}
